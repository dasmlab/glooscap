# Git Branch Workflow

## Overview
This document describes the branch workflow for multi-machine development to avoid conflicts.

## Branch Strategy

### Main Branches
- `main` - Production-ready code, always stable
- `development/*` - Feature branches for active development

### Branch Naming Convention
- `development/{machine}-{feature}` - e.g., `development/linux-operator-fixes`, `development/macos-foss-updates`
- `feature/{description}` - Specific feature work
- `fix/{description}` - Bug fixes

## Workflow

### Starting Work
1. **Always check current branch first:**
   ```bash
   git status
   git branch -a
   ```

2. **Create/switch to a development branch:**
   ```bash
   git checkout -b development/{your-branch-name}
   # or switch to existing:
   git checkout development/{your-branch-name}
   ```

3. **Push branch to remote:**
   ```bash
   git push -u origin development/{your-branch-name}
   ```

### During Development
1. **Make your changes**
2. **Commit frequently:**
   ```bash
   git add .
   git commit -m "descriptive message"
   git push
   ```

3. **Keep branch updated with main:**
   ```bash
   git fetch origin
   git merge origin/main
   # or rebase (if preferred):
   git rebase origin/main
   ```

### Before Merging to Main
1. **Ensure branch is up to date:**
   ```bash
   git fetch origin
   git merge origin/main
   ```

2. **Test thoroughly**

3. **Create PR or merge:**
   ```bash
   # Option 1: Create PR via GitHub/GitLab
   # Option 2: Merge locally (if you have permissions):
   git checkout main
   git pull origin main
   git merge development/{your-branch-name}
   git push origin main
   ```

4. **Clean up branch after merge:**
   ```bash
   git branch -d development/{your-branch-name}
   git push origin --delete development/{your-branch-name}
   ```

## Current Active Branches

### Linux/Operator Work
- `development/linux-operator-fixes` - Current branch for Linux operator fixes and improvements

### macOS/FOSS Work
- `development/macos-foss-updates` - Branch for macOS ARM64 specific work

## Best Practices

1. **Never commit directly to `main`** - Always use a branch
2. **Pull before pushing** - Always fetch/merge before pushing to avoid conflicts
3. **Use descriptive commit messages** - Follow conventional commit format
4. **Keep branches focused** - One branch per feature/fix
5. **Delete merged branches** - Clean up after merging

## Conflict Resolution

If you encounter conflicts:
1. **Don't panic** - Conflicts are normal in multi-developer workflows
2. **Pull latest changes:**
   ```bash
   git fetch origin
   git merge origin/main
   ```
3. **Resolve conflicts in your editor**
4. **Test thoroughly after resolving**
5. **Commit the resolution:**
   ```bash
   git add .
   git commit -m "resolve: Merge conflicts with main"
   ```

## Quick Reference

```bash
# Check current branch
git branch

# List all branches
git branch -a

# Create and switch to new branch
git checkout -b development/my-feature

# Switch to existing branch
git checkout development/my-feature

# Push branch to remote
git push -u origin development/my-feature

# Update branch with main
git fetch origin
git merge origin/main

# Delete local branch
git branch -d development/my-feature

# Delete remote branch
git push origin --delete development/my-feature
```

